---
title: "[Summary] LettuceDetect: A Hallucination Detection Framework for RAG Applications"
date: 2025-04-25
tags: 
- Hallucination Detection
- Retrieval-Augmented Generation
- Large Language Models
- Token Classification
draft: false 
---

## TL;DR  
Retrieval-Augmented Generation (RAG) systems are effective in grounding LLM ansswer and update their knowaldge. However, they remain vulnerable to hallucinated answers despite incorporating external knowledge sources.
Current method of detecting hulicaution using LLM as a judge, which is slow, or encoder based calssfier which are not accurate.
LettuceDetect is a lightweight long‑context token‑classification model built on ModernBERT that flags hallucinated in Retrieval‑Augmented Generation. Trained on the 18K example RAGTruth benchmark, it's surpassing prior encoder baselines while more efficient compare to LLM based methods.

## Background  
Large Language Models remain prone to hallucinating facts that are unsupported by retrieved context. Existing detectors either truncate context (encoder models) or are computationally heavy (LLM judges). LettuceDetect addresses both issues by pairing a long‑context encoder with efficient token‑level supervision.

## Method
The LettuceDetect model is as follows:
1. Input sequences were constructed by concatenating context, question, and answer segments using special tokens ([CLS] for context, [SEP]
for separation) 
2. Using ModernBERT acrchitecture which has a long context window ()
2. Answer tokens were labeled as 0 (supported) or 1 (hallucinated). 
3. The final model predicts hallucination probabilities for each answer token, with span-level out-puts generated by aggregating consecutive tokens exceeding a 0.5 confidence threshold

![System architecture](posts/20250425_lettuce_detect/summary.md)


## Limitations 
* Like any RAG system, oerformance depends on retrieval quality, irrelevant context can yield false alarms.
* Used RAGTruth for training and testing. not sure how well it generelaizes 

## References  

[Paper](https://arxiv.org/pdf/2502.17125v1)


